<div>
    <!-- MAIN SIDEBAR CONTAINER -->
    <div appSidebarContainer class="inbox-main-sidebar-container">
        <div appSidebarContent class="inbox-main-content">
            <!-- SECONDARY SIDEBAR CONTAINER -->
            <div appSidebarContainer class="inbox-secondary-sidebar-container box-shadow-1">
                <div appSidebarContent>
                    <div class="inbox-secondary-sidebar-content position-relative" style="min-height: 500px">
                        <div class="inbox-topbar box-shadow-1 pl-3" [perfectScrollbar]="{suppressScrollY: true}">
                            <!-- <span class="d-sm-none">Test</span> -->
                            <a appSidebarToggler="inbox-main-sidebar" class="link-icon d-md-none">
                                <i class="icon-regular i-Arrow-Turn-Left"></i>
                            </a>
                            <a appSidebarToggler="inbox-secondary-sidebar" class="link-icon mr-3 d-md-none">
                                <i class="icon-regular mr-1 i-Left-3"></i>
                                Inbox
                            </a>

                            <div class="d-flex" *ngIf="selected">
                                <a href="" class="link-icon mr-3"><i class="icon-regular i-Mail-Reply"></i> Reply</a>
                                <a href="" class="link-icon mr-3"><i class="icon-regular i-Mail-Reply-All"></i>
                                    Forward</a>
                                <a href="" class="link-icon mr-3"><i class="icon-regular i-Mail-Reply-All"></i>
                                    Delete</a>
                            </div>
                        </div>
                        <!-- EMAIL DETAILS -->
                        <div class="inbox-details" *ngIf="selected" [perfectScrollbar]="{suppressScrollX: true}">
                            <div class="row no-gutters">
                                <div class="mr-2" style="width: 36px">
                                    <!-- <img class="rounded-circle" [src]="selected?.sender?.photo" alt=""> -->
                                    <img class="rounded-circle" src="./assets/images/faces/f3.jpg" alt="">
                                </div>
                                <div class="col-xs-12">
                                    <p class="m-0">{{selected?.firstName | titlecase}}
                                        {{selected?.lastName | titlecase}}</p>
                                    <p class="text-12 text-muted">{{selected?.transactionDate | date: 'dd/MM/yyyy'}}</p>
                                </div>
                            </div>
                            <h4 class="mb-3">{{selected?.subject}}</h4>
                            <div [innerHTML]="selected?.complaintDescription"></div>
                            <div class="border-top mb-5"></div>

                            <div class="card mb-4">
                                <div class="card-body">
                                    <div class="card-title mb-3">
                                        <span>Complaint Category:</span>
                                        {{ selected?.channelType.channelType | titlecase}}
                                    </div>
                                    <form [formGroup]="formBasic" (ngSubmit)="submit()">
                                        <div class="row">
                                            <div class="col-md-6 form-group mb-3">
                                                <label for="firstName">First name</label>
                                                <input type="text" disabled class="form-control form-control-rounded"
                                                    id="firstName" placeholder="Customer first name"
                                                    value="{{selected?.firstName | titlecase}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3">
                                                <label for="lastName">Last name</label>
                                                <input type="text" disabled class="form-control form-control-rounded"
                                                    id="lastName" placeholder="Customer last name"
                                                    value="{{selected?.lastName | titlecase}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3">
                                                <label for="exampleInputEmail1">Email address</label>
                                                <div class="input-group">
                                                    <input type="email" disabled
                                                        class="form-control form-control-rounded"
                                                        id="exampleInputEmail1" aria-describedby="emailHelp"
                                                        placeholder="Customer email" value="{{selected?.email}}">
                                                </div>
                                            </div>

                                            <div class="col-md-6 form-group mb-3">
                                                <label for="phone">Phone</label>
                                                <input disabled class="form-control form-control-rounded" id="phone"
                                                    placeholder="Customer phone" value="{{selected?.phoneno}}">
                                            </div>

                                            <div *ngIf="selected?.alternateno" class="col-md-6 form-group mb-3">
                                                <label for="phone">Alternate Phone number</label>
                                                <input disabled class="form-control form-control-rounded" id="phone"
                                                    placeholder="Customer phone" value="{{selected?.alternateno}}">
                                            </div>

                                            <div *ngIf="selected?.lastFourDigits" class="col-md-6 form-group mb-3">
                                                <label for="credit">Card number: last four digits</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Card" value="{{selected?.lastFourDigits}}">
                                            </div>

                                            <div *ngIf="selected?.recipientAccountNo" class="col-md-6 form-group mb-3">
                                                <label for="credit">Account number</label>
                                                <input disabled class="form-control form-control-rounded" id=""
                                                    placeholder="Account number"
                                                    value="{{selected?.recipientAccountNo}}">
                                            </div>

                                            <div *ngIf="selected?.isCustomer" class="col-md-6 form-group mb-3">
                                                <label for="picker1">Are you a Union Bank customer?</label>
                                                <input disabled class="form-control form-control-rounded" id=""
                                                    placeholder="Is Union Bank Customer?"
                                                    value="{{selected?.isCustomer | titlecase}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.disappointedService">
                                                <label for="picker1">Which of our services dissapointed you?</label>
                                                <input disabled class="form-control form-control-rounded" id=""
                                                    placeholder="Which of our services dissapointed you?"
                                                    value="{{selected?.disappointedService}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.branchIncident">
                                                <label for="picker1">Was it a Branch indident</label>
                                                <input disabled class="form-control form-control-rounded" id=""
                                                    placeholder="Branch of incident"
                                                    value="{{selected?.branchIncident}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.eChannelMedium">
                                                <label for="picker1">E-Channel</label>
                                                <input disabled class="form-control form-control-rounded" id=""
                                                    placeholder="-Channel" value="{{selected?.eChannelMedium}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.cardVariant">
                                                <label for="picker1">Card Variant</label>
                                                <input disabled class="form-control form-control-rounded" id=""
                                                    placeholder="-Channel" value="{{selected?.cardVariant}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.cardComplaintType">
                                                <label for="credit">Card Complaint Type</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Card Complaint Type"
                                                    value="{{selected?.cardComplaintType}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.posMerchantName">
                                                <label for="firstName">POS Merchant name</label>
                                                <input type="text" disabled class="form-control form-control-rounded"
                                                    id="firstName"
                                                    placeholder="Customer merchant name e.g xyz business limited"
                                                    value="{{selected?.posMerchantName}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.merchantCode">
                                                <label for="phone">POS Merchant code</label>
                                                <input disabled class="form-control form-control-rounded"
                                                    id="merchantCode" placeholder="Customer Merchant code"
                                                    value="{{selected?.merchantCode}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.websiteUsed">
                                                <label for="firstName">Website where card was used</label>
                                                <input type="text" disabled class="form-control form-control-rounded"
                                                    id="firstName" placeholder="Customer Website URL e.g www.xyz.com"
                                                    value="{{selected?.websiteUsed}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.atmUsed">
                                                <label for="picker1">ATM used</label>
                                                <div class="input-group">
                                                    <input id="picker1" disabled
                                                        class="form-control form-control-rounded" placeholder="ATM used"
                                                        value="{{selected?.atmUsed}}">
                                                </div>
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.bankName">
                                                <label for="credit">Bank Used</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Bank Used" value="{{selected?.bankName}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.unionATMList">
                                                <label for="credit">Location</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Location" value="{{selected?.unionATMList}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.serviceType">
                                                <label for="credit">Service Type</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Service Type" value="{{selected?.serviceType}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.serviceProvider">
                                                <label for="credit">Service Provider</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Service Provider Used"
                                                    value="{{selected?.serviceProvider}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.ussdPhoneNo">
                                                <label for="phone">USSD registed phone</label>
                                                <input disabled class="form-control form-control-rounded" id="phone"
                                                    placeholder="Customer registered phone number"
                                                    value="{{selected?.ussdPhoneNo}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.beneficiaryPhoneNo">
                                                <label for="phone">Airtime Beneficiary number</label>
                                                <input disabled class="form-control form-control-rounded" id="phone"
                                                    placeholder="phone number" value="{{selected?.beneficiaryPhoneNo}}">
                                            </div>

                                            <!-- <div class="col-md-6 form-group mb-3" *ngIf="selected?.billType.name">
                                                <label for="picker1">Airtime billers</label>
                                                <input disabled class="form-control form-control-rounded" id="phone"
                                                    placeholder="Airtime billers" value="{{selected?.billType.name}}">
                                            </div> -->

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.unionMobile">
                                                <label for="phone">Union Mobile number</label>
                                                <input disabled class="form-control form-control-rounded" id="phone"
                                                    placeholder="Union mobile ID" value="{{selected?.unionMobile}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.recipientAccountNo">
                                                <label for="phone">Recipients Account number</label>
                                                <input disabled class="form-control form-control-rounded"
                                                    id="smartcardnumber" placeholder="Recipients phone number"
                                                    value="{{selected?.recipientAccountNo}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.recipientName">
                                                <label for="firstName">Recipients name</label>
                                                <input type="text" disabled class="form-control form-control-rounded"
                                                    id="firstName" placeholder="Customer recipients name"
                                                    value="{{selected?.recipientName}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.currencyType">
                                                <label for="credit">Currency Type</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Bank Used" value="{{selected?.currencyType}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.transactionDate">
                                                <label for="picker1">Transaction Date</label>
                                                <div class="input-group">
                                                    <input id="picker1" disabled
                                                        class="form-control form-control-rounded"
                                                        placeholder="yyyy-mm-dd" value="{{selected?.transactionDate}}">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-secondary" type="button">
                                                            <i class="icon-regular i-Calendar-4"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-6 form-group mb-3" *ngIf="selected?.transactiontype">
                                                <label for="credit">Transaction Count: Single or Multiple</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Transaction Count"
                                                    value="{{selected?.transactiontype}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3"
                                                *ngIf="selected?.transactionAmountOne">
                                                <label for="credit">Transaction Amount</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Transaction Count"
                                                    value="{{selected?.transactionAmountOne}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3"
                                                *ngIf="selected?.transactionAmountTwo">
                                                <label for="credit">Transaction Amount 2</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Transaction Count"
                                                    value="{{selected?.transactionAmountTwo}}">
                                            </div>

                                            <div class="col-md-6 form-group mb-3"
                                                *ngIf="selected?.transactionAmountThree">
                                                <label for="credit">Transaction Amount 3</label>
                                                <input disabled class="form-control form-control-rounded" id="credit"
                                                    placeholder="Transaction Count"
                                                    value="{{selected?.transactionAmountThree}}">
                                            </div>

                                            <div class="col-md-12 form-group mb-3"
                                                *ngIf="selected?.complaintDescription">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">Please describe the issue
                                                            encountered:</span>
                                                    </div>
                                                    <textarea disabled value="{{selected?.complaintDescription}}"
                                                        class="form-control" aria-label="With textarea">
                                                        </textarea>
                                                </div>
                                            </div>
                                            <div class="col-md-12 form-group mb-3" *ngIf="selected?.suggestionBox">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">What would you like us to
                                                            do?</span>
                                                    </div>
                                                    <textarea disabled value="{{selected?.suggestionBox}}"
                                                        class="form-control" aria-label="With textarea">
                                                    </textarea>
                                                </div>
                                            </div>

                                            <div class="col-md-12 form-group mb-3"
                                                *ngIf="selected?.complaintDescription">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text">Complaint Description</span>
                                                    </div>
                                                    <textarea disabled value="{{selected?.complaintDescription}}"
                                                        class="form-control" aria-label="With textarea"></textarea>
                                                </div>
                                            </div>

                                            <div class="col-md-12">
                                                <button type="button" Class="btn btn-primary btn-rounded m-1"
                                                    (click)="open(modalBasic)">Resolve</button>

                                                <button type="button" Class="btn btn-warning btn-rounded m-1"
                                                    (click)="confirm(modalConfirm)">Close</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="border-top mb-5"></div>
                        </div>
                        <!-- Intro screen -->
                        <div class="app-inro-circle inbox-intro" *ngIf="!selected">
                            <div class="border rounded-circle big-bubble"
                                [@animate]="{value:'*',params:{scale:'.2',delay:'400ms', duration: '400ms'}}">
                                <i class="i-Email"></i>
                            </div>
                            <p class="text-16"
                                [@animate]="{value:'*',params:{y:'120px',delay:'600ms', duration: '400ms'}}">Complaint
                                Inbox</p>
                        </div>
                    </div>
                </div>
                <div appSidebar="inbox-secondary-sidebar" class="inbox-secondary-sidebar"
                    [perfectScrollbar]="{suppressScrollX: true}">
                    <i class="sidebar-close i-Close" appSidebarToggler="inbox-secondary-sidebar"></i>

                    <div class="mail-item" *ngFor="let i of Issues$" (click)="select(i)">
                        <div class="avatar">
                            <img src="./assets/images/faces/f3.jpg" alt="">
                        </div>
                        <div class="col-xs-6 details">
                            <span class="name text-muted">{{i?.firstName | titlecase}}
                                {{i?.lastName | titlecase}}</span>
                            <span class="badge badge-info mr-1">{{i?.channelType.channelType | titlecase}}</span>
                            <p class="m-0">Source: {{i?.source | titlecase}}</p>
                        </div>
                        <div class="col-xs-3 date">
                            <span class="text-muted">{{i?.transactionDate | date: 'dd/MM/yyyy'}}</span>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- MAIN SIDEBAR -->
        <div appSidebar="inbox-main-sidebar" class="inbox-main-sidebar">
            <div class="pt-3 pr-3 pb-3">
                <i class="sidebar-close i-Close" appSidebarToggler="inbox-main-sidebar"></i>
                <button class="btn btn-rounded btn-primary btn-block mb-4" (click)="openComposeModal()">Compose</button>
                <p class="text-muted mb-2" (click)="test()">Browse</p>
                <ul class="inbox-main-nav">
                    <li><a href="" class="active"><i class="icon-regular i-Mail-2"></i> Open Tickets (2)</a></li>
                    <li><a href=""><i class="icon-regular i-Mail-Outbox"></i> Resolved Tickets (10)</a></li>
                    <li><a href=""><i class="icon-regular i-Mail-Favorite"></i> Priority (2)</a></li>
                    <li><a href=""><i class="icon-regular i-Folder-Trash"></i> Closed (5)</a></li>
                    <li><a href=""><i class="icon-regular i-Spam-Mail"></i> Pending Tickets (6)</a></li>
                </ul>
            </div>
        </div>

    </div>
</div>


<ng-template #modalBasic let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Assign to Resolution Team</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form>
            <div class="card mb-0">
                <div class="card-body">
                    <form>
                        <div class="form-group row">
                            <label for="inputEmail3" class="col-sm-2 col-form-label">Select Team</label>
                            <div class="col-sm-10">
                                <select class="form-control">
                                    <option>DevOps</option>
                                    <option>Marketing</option>
                                    <option>Business</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="inputEmail3" class="col-sm-2 col-form-label">Comment</label>
                            <div class="col-sm-10">
                                <textarea class="form-control" aria-label="With textarea">
                                </textarea>
                            </div>
                        </div>
                        <fieldset class="form-group">
                            <div class="row">
                                <legend class="col-form-label col-sm-2 pt-0">Re-Assign Category</legend>
                                <div class="col-sm-10">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1"
                                            value="option1" checked>
                                        <label class="form-check-label" for="gridRadios1">
                                            ATM Dispense Error
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2"
                                            value="option2">
                                        <label class="form-check-label" for="gridRadios2">
                                            Card Issue
                                        </label>
                                    </div>
                                    <div class="form-check disabled">
                                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios3"
                                            value="option3" disabled>
                                        <label class="form-check-label" for="gridRadios3">
                                            E-Channel
                                        </label>
                                    </div>
                                    <div class="form-check disabled">
                                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios3"
                                            value="option3" disabled>
                                        <label class="form-check-label" for="gridRadios3">
                                            Service
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        <div class="form-group row">
                            <div class="col-sm-2">Priority Level</div>
                            <div class="col-sm-10">
                                <label class="switch switch-primary mr-3">
                                    <span>Normal</span>
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                                <label class="switch switch-warning mr-3">
                                    <span>Medium</span>
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                                <label class="switch switch-danger mr-3">
                                    <span>High</span>
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-10">
                                <button type="submit" class="btn btn-primary">Update</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark btn-rounded" (click)="modal.close('Save click')">Assign</button>
    </div>
</ng-template>

<ng-template #modalConfirm let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-title">Profile deletion</h4>
        <button type="button" class="close" aria-label="Close button" aria-describedby="modal-title"
            (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <p><strong>Are you sure you want to delete <span class="text-primary">"John Doe"</span> profile?</strong></p>
        <p>All information associated to this user profile will be permanently deleted.
            <span class="text-danger">This operation can not be undone.</span>
        </p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary btn-rounded"
            (click)="modal.dismiss('cancel')">Cancel</button>
        <button type="button" ngbAutofocus class="btn btn-danger btn-rounded" (click)="modal.close('Ok')">Ok</button>
    </div>
</ng-template>